<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>CONTRASUBERNA - python</title>
        <link rel="stylesheet" href="https://pgervila.github.io/theme/css/main.css" />
        <link href="https://pgervila.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CONTRASUBERNA Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://pgervila.github.io/">CONTRASUBERNA </a></h1>
                <nav><ul>
                    <li><a href="https://pgervila.github.io/category/posts.html">posts</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://pgervila.github.io/first-post.html">Exploring real bilingualism trends in cities via social media</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-08-24T22:00:00+02:00">
                Published: Thu 24 August 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://pgervila.github.io/author/paolo-gervasoni.html">Paolo Gervasoni</a>
        </address>
<p>In <a href="https://pgervila.github.io/category/posts.html">posts</a>.</p>
<p>tags: <a href="https://pgervila.github.io/tag/python.html">python</a> <a href="https://pgervila.github.io/tag/bilingualism.html">bilingualism</a> <a href="https://pgervila.github.io/tag/twitter.html">Twitter</a> </p>
</footer><!-- /.post-info --><style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="IMPORT-LIBRARIES-AND-SET-UP">IMPORT LIBRARIES AND SET UP<a class="anchor-link" href="#IMPORT-LIBRARIES-AND-SET-UP">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tweepy</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="k">import</span> <span class="n">Stream</span><span class="p">,</span> <span class="n">OAuthHandler</span><span class="p">,</span> <span class="n">StreamListener</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">langdetect</span> <span class="k">import</span> <span class="n">detect</span>
<span class="kn">import</span> <span class="nn">pyprind</span>
<span class="kn">import</span> <span class="nn">deepdish</span> <span class="k">as</span> <span class="nn">dd</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#import secret codes</span>
<span class="kn">from</span> <span class="nn">twitter_pwd</span> <span class="k">import</span> <span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">,</span> <span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">auth</span> <span class="o">=</span> <span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-random-tweets-from-a-given-coordinate-box">Get random tweets from a given coordinate box<a class="anchor-link" href="#Get-random-tweets-from-a-given-coordinate-box">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [415]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># </span>
<span class="n">data_list</span><span class="p">,</span> <span class="n">texts</span><span class="p">,</span> <span class="n">langs</span><span class="p">,</span> <span class="n">locs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>

<span class="k">class</span> <span class="nc">StdOutListener</span><span class="p">(</span><span class="n">StreamListener</span><span class="p">):</span>
    <span class="sd">""" A listener handles tweets are the received from the stream.</span>
<span class="sd">    This is a basic listener that just prints received tweets to stdout.</span>
<span class="sd">    """</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">langs</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">def</span> <span class="nf">on_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">jd</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jd</span><span class="p">[</span><span class="s1">'text'</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">langs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jd</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">saveFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'newtweets.csv'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">)</span>
            <span class="n">saveFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf8"</span><span class="p">)</span>
            <span class="n">saveFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'/n'</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf8"</span><span class="p">)</span>
            <span class="n">saveFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="nb">print</span> <span class="p">(</span><span class="s1">'failed ondata'</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [416]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#coordinates</span>
<span class="n">Lviv</span> <span class="o">=</span> <span class="p">[</span><span class="mf">23.882904</span><span class="p">,</span><span class="mf">49.763526</span><span class="p">,</span><span class="mf">24.163055</span><span class="p">,</span><span class="mf">49.921167</span><span class="p">]</span>
<span class="n">Kiev</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.449982</span><span class="p">,</span><span class="mf">50.408518</span><span class="p">,</span><span class="mf">30.639496</span><span class="p">,</span><span class="mf">50.495958</span><span class="p">]</span>
<span class="n">Yerevan</span> <span class="o">=</span> <span class="p">[</span><span class="mf">44.329834</span><span class="p">,</span><span class="mf">40.078071</span><span class="p">,</span><span class="mf">44.681396</span><span class="p">,</span><span class="mf">40.296287</span><span class="p">]</span>
<span class="n">Brussel</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.258575</span><span class="p">,</span><span class="mf">50.788575</span><span class="p">,</span><span class="mf">4.489288</span><span class="p">,</span><span class="mf">50.913424</span><span class="p">]</span>
<span class="n">Barcelona</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.835403</span><span class="p">,</span><span class="mf">41.375778</span><span class="p">,</span><span class="mf">2.241898</span><span class="p">,</span><span class="mf">41.586688</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># #Barcelona</span>
<span class="c1"># l_Barc = StdOutListener()</span>
<span class="c1"># #ASK FOR KEYWORD TO COLLECT DATA</span>
<span class="c1"># stream_Barc = Stream(auth, l_Barc)</span>
<span class="c1"># stream_Barc.filter(locations=Barcelona)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Counter(l_Barc.langs)</span>
<span class="c1"># for data, lang in zip(l_Barc.data_list, l_Barc.langs):</span>
<span class="c1">#     print(data['user']['location'], lang)</span>
<span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">l_Barc</span><span class="o">.</span><span class="n">texts</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># for ee in l_Barc.data_list:</span>
<span class="c1">#     print(ee['place']['id'], ee['place']['place_type'])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># #Brussel</span>
<span class="c1"># l_Bru = StdOutListener()</span>
<span class="c1"># #ASK FOR KEYWORD TO COLLECT DATA</span>
<span class="c1"># stream_Bru = Stream(auth, l_Bru)</span>
<span class="c1"># stream_Bru.filter(locations=Brussel)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># #Counter(l_Bru.langs)</span>
<span class="c1"># for data, lang in zip(l_Bru.data_list, l_Bru.langs):</span>
<span class="c1">#     print(data['user']['location'], lang)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># #LVIV</span>
<span class="c1"># l_Lv = StdOutListener()</span>
<span class="c1"># #ASK FOR KEYWORD TO COLLECT DATA</span>
<span class="c1"># stream_Lv = Stream(auth, l_Lv)</span>
<span class="c1"># stream_Lv.filter(locations=Lviv)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># #YEREVAN</span>
<span class="c1"># l_Yer = StdOutListener()</span>
<span class="c1"># #ASK FOR KEYWORD TO COLLECT DATA</span>
<span class="c1"># stream_Yer = Stream(auth, l_Yer)</span>
<span class="c1"># stream_Yer.filter(locations=Yerevan)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># for data, lang in zip(l_Yer.data_list, l_Yer.langs):</span>
<span class="c1">#     print(data['user']['location'], lang)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># for text in l_Yer.texts:</span>
<span class="c1">#     if type(text) == str:</span>
<span class="c1">#         print(text)</span>
<span class="c1">#     else:</span>
<span class="c1">#         print(text.decode('utf-8'))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># for data, lang in zip(data_list, langs):</span>
<span class="c1">#     print(data['user']['location'], lang)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#KIEV</span>
<span class="n">l_Kiev</span> <span class="o">=</span> <span class="n">StdOutListener</span><span class="p">()</span>
<span class="c1">#ASK FOR KEYWORD TO COLLECT DATA</span>
<span class="n">stream_Kiev</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">l_Kiev</span><span class="p">)</span>
<span class="n">stream_Kiev</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">locations</span><span class="o">=</span><span class="n">Kiev</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Counter(l_Kiev.langs)</span>
<span class="c1"># for data, lang in zip(l_Kiev.data_list, l_Kiev.langs):</span>
<span class="c1">#     print(data['user']['location'], lang)</span>
<span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">l_Kiev</span><span class="o">.</span><span class="n">texts</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">l_Kiev</span><span class="o">.</span><span class="n">data_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">'place'</span><span class="p">][</span><span class="s1">'id'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">'place'</span><span class="p">][</span><span class="s1">'place_type'</span><span class="p">],</span> 
          <span class="n">data</span><span class="p">[</span><span class="s1">'place'</span><span class="p">][</span><span class="s1">'country'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'location'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [125]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">texts</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="KEY-FUNCTIONS-:-USERS,-FOLLOWERS,-TIMELINES,-LANGS">KEY FUNCTIONS : USERS, FOLLOWERS, TIMELINES, LANGS<a class="anchor-link" href="#KEY-FUNCTIONS-:-USERS,-FOLLOWERS,-TIMELINES,-LANGS">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tweepy</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">get_account_network</span><span class="p">(</span><span class="n">account_name</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="s1">'followers'</span><span class="p">,</span> <span class="n">max_num</span> <span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">key_words</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">""" Given an account by account_name, </span>
<span class="sd">        find all users that are linked to it via a specified relation type rel_type"""</span>
    <span class="n">pbar</span> <span class="o">=</span> <span class="n">pyprind</span><span class="o">.</span><span class="n">ProgBar</span><span class="p">(</span><span class="n">max_num</span><span class="p">)</span>
    <span class="n">list_people</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">wait_on_rate_limit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_on_rate_limit_notify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">rel_type</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">screen_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">max_num</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">key_words</span><span class="p">:</span>
                <span class="n">list_people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">locs</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_words</span><span class="p">)</span>
                <span class="n">patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">locs</span><span class="p">)</span>
                <span class="n">found_loc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">patt</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'location'</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">found_loc</span><span class="p">:</span>
                    <span class="n">list_people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">'Read timed out'</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'fallen here'</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">16</span><span class="p">)</span>
                <span class="n">user</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">break</span>            
        <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">list_people</span>
        
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_account_timeline</span><span class="p">(</span><span class="n">account_name</span><span class="p">,</span> <span class="n">max_num_twts</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">""" Given an account name,</span>
<span class="sd">        it retrieves a maximum number of tweets stored in a list</span>
<span class="sd">        Args:</span>
<span class="sd">            * account name: string. Screen_name that identifies the twitter account</span>
<span class="sd">            * max_num_twts: integer. Maximum number of tweets to be retrieved for each account</span>
<span class="sd">        Returns:</span>
<span class="sd">            * list_tweets: list of strings including all retrieved tweets"""</span>
    <span class="n">list_tweets</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">wait_on_rate_limit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_on_rate_limit_notify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">timeline</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">user_timeline</span><span class="p">,</span> <span class="n">screen_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">max_num_twts</span><span class="p">)</span>
    <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tw</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">timeline</span><span class="p">)</span>
            <span class="n">list_tweets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">'401'</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>    
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">15</span><span class="p">)</span>
                <span class="n">tw</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">timeline</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">list_tweets</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_twts_from_list_account_names</span><span class="p">(</span><span class="n">list_accounts</span><span class="p">,</span> <span class="n">max_num_accounts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_num_twts</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">""" """</span>
    <span class="n">pbar</span> <span class="o">=</span> <span class="n">pyprind</span><span class="o">.</span><span class="n">ProgBar</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_accounts</span><span class="p">))</span>
    <span class="n">texts_tweets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">langs_tweets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">authors_tweets</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">max_num_accounts</span><span class="p">:</span>
        <span class="n">list_accounts</span> <span class="o">=</span> <span class="n">list_accounts</span><span class="p">[:</span><span class="n">max_num_accounts</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_accounts</span><span class="p">):</span>
        <span class="c1">#print(idx)</span>
        <span class="n">tl</span> <span class="o">=</span> <span class="n">get_account_timeline</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">max_num_twts</span><span class="o">=</span><span class="n">max_num_twts</span><span class="p">)</span>
        <span class="n">texts_tweets</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">tw</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="n">tl</span><span class="p">])</span>
        <span class="n">langs_tweets</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">tw</span><span class="o">.</span><span class="n">lang</span> <span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="n">tl</span><span class="p">])</span>
        <span class="n">authors_tweets</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">f</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">tl</span><span class="p">])</span>
        <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">texts_tweets</span><span class="p">,</span> <span class="n">langs_tweets</span><span class="p">,</span> <span class="n">authors_tweets</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="UKRAINE:-data-structure-and-relevant-twitter-accounts">UKRAINE: data structure and relevant twitter accounts<a class="anchor-link" href="#UKRAINE:-data-structure-and-relevant-twitter-accounts">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Ukraine_nodes</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'cities'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'kiev'</span><span class="p">,</span> <span class="s1">'odessa'</span><span class="p">,</span> <span class="s1">'lviv'</span><span class="p">,</span> <span class="s1">'kharkov'</span><span class="p">,</span> <span class="s1">'dnipropetrovsk'</span><span class="p">]</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'city_sites'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'Mariupol'</span><span class="p">:[</span><span class="s1">'0629ComUa'</span><span class="p">],</span> 
                               <span class="s1">'kiev'</span><span class="p">:[</span><span class="s1">'kievtypical'</span><span class="p">,</span><span class="s1">'kliniki_kiev'</span><span class="p">,</span><span class="s1">'LISOD_clinic'</span><span class="p">,</span><span class="s1">'avto_kiev'</span><span class="p">,</span> <span class="s1">'editbeauty'</span><span class="p">]}</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'news'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'HromadskeUA'</span><span class="p">,</span><span class="s1">'tsnua'</span><span class="p">,</span><span class="s1">'ukrpravda_news'</span><span class="p">,</span> <span class="s1">'lb_ua'</span><span class="p">,</span> <span class="s1">'Korrespondent'</span><span class="p">,</span> 
                         <span class="s1">'Delo_ua'</span><span class="p">,</span> <span class="s1">'BBC_ua'</span><span class="p">,</span> <span class="s1">'LIGAnet'</span><span class="p">,</span> <span class="s1">'segodnya_life'</span><span class="p">]</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'TV'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'5channel'</span><span class="p">,</span> <span class="s1">'EspresoTV'</span><span class="p">,</span> <span class="s1">'24tvua'</span><span class="p">,</span> <span class="s1">'footballua_tv'</span><span class="p">]</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'starsystem'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'VeraBrezhneva'</span><span class="p">,</span> <span class="s1">'s_vakarchuk'</span><span class="p">,</span> <span class="s1">'KAMEHCKUX'</span><span class="p">]</span>
<span class="n">Ukraine_nodes</span><span class="p">[</span><span class="s1">'politics'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'poroshenko'</span><span class="p">,</span> <span class="s1">'Vitaliy_Klychko'</span><span class="p">,</span> <span class="s1">'andriy_sadovyi'</span><span class="p">,</span> <span class="s1">'GennadyKernes'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">key_words</span><span class="o">=</span><span class="p">[</span><span class="s1">'Україна'</span><span class="p">,</span> <span class="s1">'Ukraine'</span><span class="p">,</span> <span class="s1">'Украина'</span><span class="p">,</span> <span class="s1">'Київ'</span><span class="p">,</span> <span class="s1">'Киев'</span><span class="p">]</span>
<span class="n">HromadskeUA_followers</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="s1">'HromadskeUA'</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="s1">'followers'</span><span class="p">,</span> 
                                            <span class="n">max_num</span> <span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">key_words</span><span class="o">=</span><span class="n">key_words</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">country</span> <span class="o">=</span> <span class="s1">'ukr'</span>
<span class="n">node_name</span> <span class="o">=</span> <span class="s1">'politics'</span>
<span class="n">acc_name</span> <span class="o">=</span> <span class="s1">'poroshenko'</span>
<span class="n">rel_type</span> <span class="o">=</span> <span class="s1">'followers'</span>

<span class="c1">#key_words=['Україна', 'Ukraine', 'Украина', 'Київ', 'Киев']</span>
<span class="n">path_save</span> <span class="o">=</span> <span class="s1">'/'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">''</span><span class="p">,</span><span class="n">country</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">acc_name</span><span class="p">,</span> <span class="n">rel_type</span><span class="p">])</span>
<span class="n">followers</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="n">acc_name</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="n">rel_type</span><span class="p">,</span> 
                                <span class="n">max_num</span> <span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">key_words</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">json_format</span> <span class="o">=</span> <span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">_json</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">followers</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json_format</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_save</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>0%                          100%
[#                             ] | ETA: 00:01:50</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Rate limit reached. Sleeping for: 895
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###                           ] | ETA: 02:20:33</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 891
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####                         ] | ETA: 02:35:13</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 894
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######                       ] | ETA: 02:34:01</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########                     ] | ETA: 02:25:49</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##########                    ] | ETA: 02:35:50</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############                  ] | ETA: 02:21:12</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############                ] | ETA: 02:05:27</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 892
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[################              ] | ETA: 01:49:42</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##################            ] | ETA: 01:34:25</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 891
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###################           ] | ETA: 01:30:53</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####################         ] | ETA: 01:14:15</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######################       ] | ETA: 00:57:25</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 891
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########################     ] | ETA: 00:40:58</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 892
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###########################   ] | ETA: 00:24:30</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 893
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############################  ] | ETA: 00:16:50</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 892
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############################] | ETA: 00:00:00
Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04

Total time elapsed: 04:12:04
//anaconda/lib/python3.5/site-packages/pandas/core/generic.py:939: PerformanceWarning: 
your performance may suffer as PyTables will pickle object types that it cannot
map directly to c-types [inferred_type->mixed,key->block3_values] [items->['created_at', 'description', 'entities', 'id_str', 'lang', 'location', 'name', 'profile_background_color', 'profile_background_image_url', 'profile_background_image_url_https', 'profile_banner_url', 'profile_image_url', 'profile_image_url_https', 'profile_link_color', 'profile_sidebar_border_color', 'profile_sidebar_fill_color', 'profile_text_color', 'screen_name', 'status', 'time_zone', 'translator_type', 'url']]

  return pytables.to_hdf(path_or_buf, key, self, **kwargs)
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">'location'</span><span class="p">,</span><span class="s1">'screen_name'</span><span class="p">,</span><span class="s1">'lang'</span><span class="p">]][</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(Львів|Львов)"</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:1: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  if __name__ == '__main__':
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[8]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>location</th>
<th>screen_name</th>
<th>lang</th>
</tr>
</thead>
<tbody>
<tr>
<th>522</th>
<td>Україна Львів</td>
<td>juliaskab13</td>
<td>uk</td>
</tr>
<tr>
<th>1006</th>
<td>Львов</td>
<td>novinska_cat</td>
<td>ru</td>
</tr>
<tr>
<th>1661</th>
<td>Львов</td>
<td>HumenuykRoma</td>
<td>ru</td>
</tr>
<tr>
<th>2269</th>
<td>Львів</td>
<td>kaprikorn87</td>
<td>uk</td>
</tr>
<tr>
<th>2997</th>
<td>Україна Львів</td>
<td>Hollywell83</td>
<td>uk</td>
</tr>
<tr>
<th>3803</th>
<td>м .Львів</td>
<td>M8tgs4YGZ391fNw</td>
<td>uk</td>
</tr>
<tr>
<th>4731</th>
<td>Львів</td>
<td>cherniak_gi</td>
<td>uk</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(Львів|Львов|Lviv|Івано-Франківськ)"</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:1: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  if __name__ == '__main__':
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[9]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>uk    8
ru    3
en    1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="mi">10</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(Kiev|Kyiv|Київ|Киев)"</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:1: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  if __name__ == '__main__':
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[10]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>ru    14
en     2
uk     1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [120]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[[</span><span class="s1">'lang'</span><span class="p">,</span><span class="s1">'screen_name'</span><span class="p">,</span> <span class="s1">'followers_count'</span><span class="p">]][</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="mi">200</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(Kiev|Kyiv|Київ|Киев)"</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:1: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  if __name__ == '__main__':
//anaconda/lib/python3.5/site-packages/pandas/core/frame.py:1997: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  "DataFrame index.", UserWarning)
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[120]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>lang</th>
<th>screen_name</th>
<th>followers_count</th>
</tr>
</thead>
<tbody>
<tr>
<th>55</th>
<td>ru</td>
<td>AnPrikhodko</td>
<td>209429</td>
</tr>
<tr>
<th>139</th>
<td>ru</td>
<td>YouScan</td>
<td>2809</td>
</tr>
<tr>
<th>255</th>
<td>ru</td>
<td>Starckad</td>
<td>1906</td>
</tr>
<tr>
<th>335</th>
<td>ru</td>
<td>KatiaNeznayko</td>
<td>144</td>
</tr>
<tr>
<th>409</th>
<td>ru</td>
<td>shampynelas</td>
<td>34</td>
</tr>
<tr>
<th>720</th>
<td>uk</td>
<td>AlexKhrebet</td>
<td>934</td>
</tr>
<tr>
<th>756</th>
<td>uk</td>
<td>interfaxua</td>
<td>88046</td>
</tr>
<tr>
<th>1204</th>
<td>uk</td>
<td>Yavorskyi_AV</td>
<td>6</td>
</tr>
<tr>
<th>1278</th>
<td>ru</td>
<td>vzhernovoy</td>
<td>107</td>
</tr>
<tr>
<th>1308</th>
<td>en</td>
<td>edele4ka</td>
<td>264</td>
</tr>
<tr>
<th>1336</th>
<td>ru</td>
<td>LISUNDRA</td>
<td>5</td>
</tr>
<tr>
<th>1701</th>
<td>en</td>
<td>PBest</td>
<td>622</td>
</tr>
<tr>
<th>1807</th>
<td>uk</td>
<td>Akiraigo</td>
<td>179</td>
</tr>
<tr>
<th>1841</th>
<td>ru</td>
<td>Tardigrrrada</td>
<td>1001</td>
</tr>
<tr>
<th>2131</th>
<td>ru</td>
<td>bohomol1841</td>
<td>710</td>
</tr>
<tr>
<th>2136</th>
<td>ru</td>
<td>LightsvSv</td>
<td>328</td>
</tr>
<tr>
<th>2223</th>
<td>sv</td>
<td>AmbHagstrom</td>
<td>3129</td>
</tr>
<tr>
<th>2523</th>
<td>en</td>
<td>serhiykiral</td>
<td>1009</td>
</tr>
<tr>
<th>2903</th>
<td>en</td>
<td>maksimmasliy</td>
<td>64</td>
</tr>
<tr>
<th>2988</th>
<td>ru</td>
<td>Prosto_Mark</td>
<td>220</td>
</tr>
<tr>
<th>3160</th>
<td>ru</td>
<td>valentindjim</td>
<td>479</td>
</tr>
<tr>
<th>3752</th>
<td>ru</td>
<td>valintin1988</td>
<td>90</td>
</tr>
<tr>
<th>4018</th>
<td>uk</td>
<td>AntonioKoval</td>
<td>34</td>
</tr>
<tr>
<th>4230</th>
<td>ru</td>
<td>TanjaNifontova</td>
<td>83</td>
</tr>
<tr>
<th>4270</th>
<td>ru</td>
<td>AnastasijaKaram</td>
<td>271</td>
</tr>
<tr>
<th>4443</th>
<td>en</td>
<td>darialeksy</td>
<td>149</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [197]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="mi">5</span><span class="p">][[</span><span class="s1">'screen_name'</span><span class="p">,</span> <span class="s1">'statuses_count'</span><span class="p">,</span><span class="s1">'followers_count'</span><span class="p">]]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[197]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>screen_name        501
statuses_count     501
followers_count    501
dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [78]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#HRMUA_flwrs = [f for idx, f in df_HRMUA.iterrows()]</span>
<span class="c1">#HRMUA_texts, HRMUA_langs = get_twts_from_list_account_names(HRMUA_flwrs, max_num_followers=300)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [66]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts_langs_HRMUA</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'texts'</span><span class="p">:</span><span class="n">HRMUA_texts</span><span class="p">,</span> <span class="s1">'lang'</span><span class="p">:</span><span class="n">HRMUA_langs</span><span class="p">})</span>

<span class="n">df_txts_langs_HRMUA</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="s1">'/ukr_nodes/news/HromadskeUA/tls_followers'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="s1">'/ukr_nodes/news/HromadskeUA/tls_followers'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="CATALONIA-NODES">CATALONIA NODES<a class="anchor-link" href="#CATALONIA-NODES">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [56]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Catalonia_nodes</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">Catalonia_nodes</span><span class="p">[</span><span class="s1">'news'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'LaVanguardia'</span><span class="p">,</span> <span class="s1">'VilaWeb'</span><span class="p">,</span> <span class="s1">'diariARA'</span><span class="p">,</span> <span class="s1">'elperiodico'</span><span class="p">,</span>
                           <span class="s1">'elperiodico_cat'</span><span class="p">,</span> <span class="s1">'elpuntavui'</span><span class="p">]</span>
<span class="n">Catalonia_nodes</span><span class="p">[</span><span class="s1">'cities'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'bcn_ajuntament'</span><span class="p">,</span> <span class="s1">'paerialleida'</span><span class="p">,</span> <span class="s1">'girona_cat'</span><span class="p">,</span> <span class="s1">'TGNAjuntament'</span><span class="p">,</span> 
                             <span class="s1">'AjBadalona'</span><span class="p">,</span> <span class="s1">'aj_vic'</span><span class="p">,</span> <span class="s1">'ajterrassa'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [87]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_account_followers</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">acc_name</span><span class="p">):</span>
    <span class="n">path_save</span> <span class="o">=</span> <span class="s1">'/'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">''</span><span class="p">,</span> <span class="n">country</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">acc_name</span><span class="p">,</span> <span class="s1">'followers'</span><span class="p">])</span>
    <span class="n">followers</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="n">acc_name</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="s1">'followers'</span><span class="p">,</span> <span class="n">max_num</span> <span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
    <span class="n">json_format</span> <span class="o">=</span> <span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">_json</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">followers</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json_format</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_save</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
    
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [88]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">get_account_followers</span><span class="p">(</span><span class="n">country</span> <span class="o">=</span><span class="s1">'cat'</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="s1">'cities'</span><span class="p">,</span> <span class="n">acc_name</span><span class="o">=</span><span class="s1">'AjBadalona'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>0%                          100%
[#                             ] | ETA: 00:03:21</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Rate limit reached. Sleeping for: 889
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###                           ] | ETA: 02:20:09</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 889
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####                         ] | ETA: 02:38:29</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 888
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######                       ] | ETA: 02:37:27</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 886
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########                     ] | ETA: 05:34:47</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 887
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##########                    ] | ETA: 05:18:59</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 887
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############                  ] | ETA: 04:23:35</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 886
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############                ] | ETA: 03:38:30</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 884
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[################              ] | ETA: 03:01:26</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 885
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##################            ] | ETA: 02:29:02</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 888
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###################           ] | ETA: 02:18:18</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 888
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####################         ] | ETA: 01:49:20</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 889
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######################       ] | ETA: 01:38:41</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 890
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########################     ] | ETA: 01:08:07</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 884
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###########################   ] | ETA: 00:39:35</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 887
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############################  ] | ETA: 00:26:34</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
Rate limit reached. Sleeping for: 887
fallen here</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############################] | ETA: 00:00:00
Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31

Total time elapsed: 06:28:31
//anaconda/lib/python3.5/site-packages/pandas/core/generic.py:939: PerformanceWarning: 
your performance may suffer as PyTables will pickle object types that it cannot
map directly to c-types [inferred_type->mixed,key->block3_values] [items->['created_at', 'description', 'entities', 'id_str', 'lang', 'location', 'name', 'profile_background_color', 'profile_background_image_url', 'profile_background_image_url_https', 'profile_banner_url', 'profile_image_url', 'profile_image_url_https', 'profile_link_color', 'profile_sidebar_border_color', 'profile_sidebar_fill_color', 'profile_text_color', 'screen_name', 'status', 'time_zone', 'translator_type', 'url']]

  return pytables.to_hdf(path_or_buf, key, self, **kwargs)
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Failed to send request: HTTPSConnectionPool(host='api.twitter.com', port=443): Read timed out. (read timeout=60)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [89]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[89]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>es       3586
ca       1102
en        271
fr          9
it          7
en-gb       5
pt          4
de          3
eu          2
ar          2
ru          2
gl          1
pl          1
en-GB       1
zh-cn       1
ja          1
tr          1
ro          1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [90]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"(Badal)"</span>
<span class="n">df_Bad</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="mi">10</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">regex</span><span class="p">)]</span>
<span class="n">df_Bad</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:2: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  from ipykernel import kernelapp as app
//anaconda/lib/python3.5/site-packages/pandas/core/frame.py:1997: UserWarning: Boolean Series key will be reindexed to match DataFrame index.
  "DataFrame index.", UserWarning)
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[90]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>es    688
ca    281
en     51
fr      1
it      1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [91]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="mi">281</span><span class="o">/</span><span class="p">(</span><span class="mi">688</span><span class="o">+</span><span class="mi">281</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[91]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.2899896800825593</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GET-TWEETS-FROM-FOLLOWERS">GET TWEETS FROM FOLLOWERS<a class="anchor-link" href="#GET-TWEETS-FROM-FOLLOWERS">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [95]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_tl_followers</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">country</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_num_twts_per_acc</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">max_num_followers</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">""" Creates pandas dataframe with all tweet texts and corresponding language</span>
<span class="sd">    from followers of a given account. A dataframe with all followers info </span>
<span class="sd">    must have been previously computed and saved in hdf5 format"""</span>
    <span class="n">base_path</span> <span class="o">=</span> <span class="s1">'/'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">''</span><span class="p">,</span><span class="n">country</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">screen_name</span><span class="p">])</span>
    <span class="n">path_load</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">'/followers'</span>
    <span class="n">path_save</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">'/tls_followers'</span>
    <span class="n">key_words</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'ukr'</span><span class="p">:{</span><span class="s1">'all'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Україна|Ukraine|Украина|Київ|Киев|Львів|Львов|Одес)"</span><span class="p">,</span> 
                        <span class="s1">'Kiev'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Kiev|Kyiv|Київ|Киев)"</span><span class="p">},</span> 
                 <span class="s1">'cat'</span><span class="p">:{</span><span class="s1">'all'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Barcel|Catal|Tarr|Llei|Ger|Gir|Badal)"</span><span class="p">,</span>
                        <span class="s1">'Terrassa'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Terras|Vall)"</span><span class="p">,</span>
                        <span class="s1">'Girona'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Giro|Gero)"</span><span class="p">,</span>
                        <span class="s1">'Vic'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Vic|Oson)"</span><span class="p">,</span> <span class="s1">'Barcelona'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Barcel|barcel|Bcn|bcn)"</span><span class="p">,</span>
                        <span class="s1">'Tarragona'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Tarrag|tarrag)"</span><span class="p">,</span> <span class="s1">'Lleida'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"(Lleida|Lerid|Lérid)"</span><span class="p">,</span>
                        <span class="s1">'Badalona'</span><span class="p">:</span><span class="sa">r</span><span class="s2">"Badal"</span><span class="p">}}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_load</span><span class="p">)</span>
    <span class="c1"># filter by num_min_twts_per_account</span>
    <span class="n">relevant_followers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'screen_name'</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="n">min_num_twts_per_acc</span><span class="p">]</span>
    <span class="c1"># keep only country residents</span>
    <span class="k">if</span> <span class="n">city</span><span class="p">:</span>
        <span class="n">relevant_followers</span> <span class="o">=</span> <span class="n">relevant_followers</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">key_words</span><span class="p">[</span><span class="n">country</span><span class="p">][</span><span class="n">city</span><span class="p">])]</span><span class="o">.</span><span class="n">values</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">relevant_followers</span> <span class="o">=</span> <span class="n">relevant_followers</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">key_words</span><span class="p">[</span><span class="n">country</span><span class="p">][</span><span class="s1">'all'</span><span class="p">])]</span><span class="o">.</span><span class="n">values</span>
        
    <span class="n">texts</span><span class="p">,</span> <span class="n">langs</span><span class="p">,</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">get_twts_from_list_account_names</span><span class="p">(</span><span class="n">relevant_followers</span><span class="p">,</span> 
                                                          <span class="n">max_num_accounts</span><span class="o">=</span><span class="n">max_num_followers</span><span class="p">)</span>
    <span class="n">df_txts_langs</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'texts'</span><span class="p">:</span><span class="n">texts</span><span class="p">,</span> <span class="s1">'lang'</span><span class="p">:</span><span class="n">langs</span><span class="p">,</span> <span class="s1">'screen_name'</span><span class="p">:</span><span class="n">auth</span><span class="p">})</span>
    <span class="n">df_txts_langs</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_save</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_txts_langs</span>
    
    
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [96]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts_langs</span> <span class="o">=</span> <span class="n">get_tl_followers</span><span class="p">(</span><span class="s1">'AjBadalona'</span> <span class="p">,</span> <span class="s1">'cat'</span><span class="p">,</span> <span class="s1">'cities'</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">'Badalona'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>0%                          100%
[##                            ] | ETA: 00:13:58</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[####                          ] | ETA: 00:15:44</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####                         ] | ETA: 00:17:57</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[######                        ] | ETA: 00:17:15</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######                       ] | ETA: 00:17:27</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[########                      ] | ETA: 00:16:15</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########                     ] | ETA: 00:15:38</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##########                    ] | ETA: 00:14:31</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############                  ] | ETA: 00:12:31</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#############                 ] | ETA: 00:12:02</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############                ] | ETA: 00:11:22</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###############               ] | ETA: 00:10:59</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[################              ] | ETA: 00:10:23</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#################             ] | ETA: 00:09:49</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##################            ] | ETA: 00:09:02</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###################           ] | ETA: 00:08:09</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[####################          ] | ETA: 00:07:35</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#####################         ] | ETA: 00:06:44</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[######################        ] | ETA: 00:06:01</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#######################       ] | ETA: 00:05:13</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##########################    ] | ETA: 00:02:52</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[###########################   ] | ETA: 00:02:09</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############################  ] | ETA: 00:01:25</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[############################# ] | ETA: 00:00:42</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############################] | ETA: 00:00:00</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>
Total time elapsed: 00:21:29
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [97]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts_langs</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[97]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>es     4702
und    4427
en      554
pt       94
fr       40
it       20
in       15
eu       10
nl       10
ht        8
et        6
tl        6
ro        5
hu        5
lt        5
tr        4
cs        4
de        3
cy        3
no        3
da        3
pl        2
sv        2
fi        2
vi        2
hi        1
is        1
ja        1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [72]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">langdetect</span> <span class="k">import</span> <span class="n">detect_langs</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [160]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">langdetect</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [159]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">detect</span><span class="p">(</span><span class="s2">"jo no vull això"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[159]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>'fi'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [171]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts_langs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[171]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>Index(['lang', 'screen_name', 'texts'], dtype='object')</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [98]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_txts_langs</span><span class="p">[[</span><span class="s1">'texts'</span><span class="p">,</span> <span class="s1">'lang'</span><span class="p">,</span> <span class="s1">'screen_name'</span><span class="p">]][</span><span class="n">df_txts_langs</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'und'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[98]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>texts</th>
<th>lang</th>
<th>screen_name</th>
</tr>
</thead>
<tbody>
<tr>
<th>10</th>
<td>Amb un referèndum el reconeixeria la societat ...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>11</th>
<td>Si el Govern d #Badalona està en caiguda lliur...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>12</th>
<td>RT @PuigMiquel: @miriamnoguerasM @JordiHD883 @...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>13</th>
<td>RT @PereMtzCarrete: El @PDeCATBDN agraïm al pr...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>15</th>
<td>RT @nereida_edo: Espectacle patètic d'insults ...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>16</th>
<td>RT @lciuro: En "47, clar i català, us dic els ...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>17</th>
<td>RT @KRLS: Nova vergonya internacional. Es van ...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>18</th>
<td>RT @martapascal: Estrasburg ens ampara, al Par...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>19</th>
<td>RT @PDCComarquesBCN: Ds dl @PDCComarquesBCN fe...</td>
<td>und</td>
<td>davramey</td>
</tr>
<tr>
<th>20</th>
<td>@JCallauBartoli @AjSantAdria @HugoFerrerSaez @...</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>21</th>
<td>Badalona, pont carrer Maria Auxiliadora http:/...</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>22</th>
<td>http://t.co/CpPPRlRv8G</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>23</th>
<td>Estrella Damm - Concert Inaugural Sónar - Pet ...</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>26</th>
<td>http://t.co/Z0RuNDLm</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>27</th>
<td>Recollint el sopar</td>
<td>und</td>
<td>ferranaracil</td>
</tr>
<tr>
<th>32</th>
<td>#MásEsMás @AlejandroSanz 😍 https://t.co/jPO0qK...</td>
<td>und</td>
<td>cristinas_13</td>
</tr>
<tr>
<th>35</th>
<td>RT @Chenoaoficial: 🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟...</td>
<td>und</td>
<td>cristinas_13</td>
</tr>
<tr>
<th>39</th>
<td>@AjBadalona si us plau controlin la plaga de «...</td>
<td>und</td>
<td>arderiunajarro</td>
</tr>
<tr>
<th>45</th>
<td>https://t.co/ynOGg0C1ko</td>
<td>und</td>
<td>arderiunajarro</td>
</tr>
<tr>
<th>46</th>
<td>https://t.co/6FpFtPmSlh</td>
<td>und</td>
<td>arderiunajarro</td>
</tr>
<tr>
<th>47</th>
<td>https://t.co/KKCTcflhNO</td>
<td>und</td>
<td>arderiunajarro</td>
</tr>
<tr>
<th>48</th>
<td>https://t.co/3TbuAIVRqX</td>
<td>und</td>
<td>arderiunajarro</td>
</tr>
<tr>
<th>52</th>
<td>RT @324cat: Caderneres, verdums, passerells......</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>53</th>
<td>Odio els petards, em recorda les guerres, els ...</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>54</th>
<td>https://t.co/ygUArvMP0f</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>55</th>
<td>Un altre pacient que cau a les meves mans. Un ...</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>56</th>
<td>RT @mediambientcat: Amb la #calor, si tens ani...</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>57</th>
<td>RT @mediambientcat: Fa dies que els falciots h...</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>58</th>
<td>@mediambientcat @siscomanas  https://t.co/wqIg...</td>
<td>und</td>
<td>shellwildlife</td>
</tr>
<tr>
<th>60</th>
<td>https://t.co/J9eFPlX7Ij</td>
<td>und</td>
<td>Fenages</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>9889</th>
<td>RT @Jepetgi: @salvemcalandal Per Nadal hi haur...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9890</th>
<td>RT @pessebrescat: L'obertura del Museu del Pes...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9892</th>
<td>Els nostres pessebristes (17) https://t.co/uHV...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9893</th>
<td>Els nostres pessebristes (16) https://t.co/eJw...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9894</th>
<td>Els nostres pessebristes (15) https://t.co/TZF...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9895</th>
<td>Recordeu que avui a la tarda teniu l'última op...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9896</th>
<td>Els nostres pessebristes (14) https://t.co/sqK...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9897</th>
<td>Els Amics del Pessebre de Badalona us desitgem...</td>
<td>und</td>
<td>PessebreBDN</td>
</tr>
<tr>
<th>9904</th>
<td>@maldiniplus @slobulus xDDD</td>
<td>und</td>
<td>LucaGarzeli</td>
</tr>
<tr>
<th>9908</th>
<td>Molta paciència. El més important és que torna...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9909</th>
<td>#EurolligaE3 Anims @PauRibas . Se el què se se...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9910</th>
<td>Experiència impressionant. Crec que passem mas...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9911</th>
<td>L'@AjBadalona de tots el que obren ha sigut l'...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9912</th>
<td>Que extrany que l'estat no hagi demandat al me...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9913</th>
<td>Unic ajuntament amb obligació de tancar de tot...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9914</th>
<td>@AjBadalona Si un bon grup d'Ajuntaments pense...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9915</th>
<td>Xapó Turull. Posant al PP i Cs al seu lloc. Pr...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9916</th>
<td>Discurs que deixa molt que dessitjar. Com semp...</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9917</th>
<td>Albi!!!! És que és de ser inutil!!! 😂 #DPGTV3</td>
<td>und</td>
<td>oscar_grc</td>
</tr>
<tr>
<th>9920</th>
<td>https://t.co/YwxGpe3P9K</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9922</th>
<td>❤</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9923</th>
<td>https://t.co/CPVmFpUHXw</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9924</th>
<td>https://t.co/lDvNVJ5Ota</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9925</th>
<td>https://t.co/b6aHwNGegT</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9926</th>
<td>https://t.co/EYzkZHat06</td>
<td>und</td>
<td>Cat_Astur</td>
</tr>
<tr>
<th>9928</th>
<td>@elmonarac1 @jordibaste Doncs menys mal que fu...</td>
<td>und</td>
<td>rseriol</td>
</tr>
<tr>
<th>9930</th>
<td>@elpuntavui Deuen anar justets de socis...</td>
<td>und</td>
<td>rseriol</td>
</tr>
<tr>
<th>9934</th>
<td>@xaviertrias Si se li hagués fet a l'Ada Colau...</td>
<td>und</td>
<td>rseriol</td>
</tr>
<tr>
<th>9935</th>
<td>@ANTONICOMPTA 😂😂😂😂</td>
<td>und</td>
<td>rseriol</td>
</tr>
<tr>
<th>9937</th>
<td>@fduranv @AjBadalona No és "exacta" aquesta af...</td>
<td>und</td>
<td>rseriol</td>
</tr>
</tbody>
</table>
<p>4427 rows × 3 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [272]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">base_path</span> <span class="o">=</span> <span class="s1">'/'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">''</span><span class="p">,</span><span class="n">country</span><span class="p">,</span> <span class="n">node_name</span><span class="p">,</span> <span class="n">screen_name</span><span class="p">])</span>
<span class="n">path_load</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">'/followers'</span>
<span class="n">path_save</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span> <span class="s1">'/tls_followers'</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [280]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_save</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [230]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># filter followers to focus on most relevant ones</span>
<span class="n">min_num_twts</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">relevant_followers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'screen_name'</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">]</span> <span class="o">>=</span> <span class="n">min_num_twts</span><span class="p">][</span>
                         <span class="n">df</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">key_words</span><span class="p">[</span><span class="n">country</span><span class="p">])</span>
                       <span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>//anaconda/lib/python3.5/site-packages/ipykernel/__main__.py:4: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [220]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># get twts, lang, authors. Transform to pandas df and save</span>
<span class="n">texts</span><span class="p">,</span> <span class="n">langs</span><span class="p">,</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">get_twts_from_list_account_names</span><span class="p">(</span><span class="n">relevant_followers</span><span class="p">,</span> <span class="n">max_num_followers</span><span class="o">=</span><span class="mi">79</span><span class="p">)</span>
<span class="n">df_txts_langs</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'texts'</span><span class="p">:</span><span class="n">texts</span><span class="p">,</span> <span class="s1">'lang'</span><span class="p">:</span><span class="n">langs</span><span class="p">,</span> <span class="s1">'screen_name'</span><span class="p">:</span><span class="n">auth</span><span class="p">})</span>
<span class="n">df_txts_langs</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="n">path_save</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>0%                          100%
[#####                         ] | ETA: 00:01:51</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Twitter error response: status code = 401
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#########                     ] | ETA: 00:01:37</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[#############                 ] | ETA: 00:01:22</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############                ] | ETA: 00:01:27</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[####################          ] | ETA: 00:00:50</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[######################        ] | ETA: 00:00:42</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[########################      ] | ETA: 00:00:33</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
Twitter error response: status code = 401</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>[##############################] | ETA: 00:00:00</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>
Total time elapsed: 00:02:40
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [122]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#df_txts_langs['lang'].value_counts()</span>
<span class="c1">#langs_detected = [detect(txt) for txt in df_txts_langs['texts']]</span>

<span class="n">langs_detected</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">df_txts_langs</span><span class="p">[</span><span class="s1">'texts'</span><span class="p">]:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">langs_detected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">detect</span><span class="p">(</span><span class="n">txt</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">langs_detected</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [55]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_try</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:[</span><span class="s1">'aaaa'</span><span class="p">,</span><span class="s1">'bbbfdde'</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">'b'</span><span class="p">:[</span><span class="mi">23</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">56</span><span class="p">]})</span>
<span class="n">df_try2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:[</span><span class="s1">'xxxx'</span><span class="p">,</span><span class="s1">'zzzz'</span><span class="p">],</span><span class="s1">'b'</span><span class="p">:[</span><span class="mi">3233</span><span class="p">,</span><span class="mi">43214</span><span class="p">]})</span>

<span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">'try_hyerar.h5'</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'city/topic'</span><span class="p">,</span> <span class="n">df_try</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'try_hyerar.h5'</span><span class="p">,</span> <span class="s1">'city/topic'</span><span class="p">)</span>

<span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">'try_hyerar.h5'</span><span class="p">,</span><span class="s1">'a'</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'city/topic'</span><span class="p">,</span> <span class="n">df_try2</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'try_hyerar.h5'</span><span class="p">,</span> <span class="s1">'city/topic'</span><span class="p">)</span>

<span class="n">store</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">'try_hyerar.h5'</span><span class="p">,</span><span class="s1">'a'</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">'city/followers'</span><span class="p">,</span><span class="n">df</span><span class="p">)</span>

<span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="EXPLORE-AN-ACCOUNT">EXPLORE AN ACCOUNT<a class="anchor-link" href="#EXPLORE-AN-ACCOUNT">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>
<span class="n">user_info</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="s1">'onlyforulonely '</span><span class="p">)</span>  <span class="c1">#ArnauAndreu</span>
<span class="n">user_info</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[11]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>'Ostroh'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#get timeline</span>
<span class="n">tl</span> <span class="o">=</span> <span class="n">get_account_timeline</span><span class="p">(</span><span class="s1">'onlyforulonely'</span><span class="p">,</span><span class="n">max_num_twts</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">[(</span><span class="n">elem</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">],</span><span class="n">elem</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'text'</span><span class="p">])</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">tl</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[21]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[('uk', '@anastasiiareshe Подякувала😇'),
 ('uk',
  '@1705Belka тоді чекатиму твоїх смс зі словами "мене не забрав татко, йдемоо"😅'),
 ('uk',
  '@1705Belka тоді зможемо разом піти на випускний 11-их класів, а то у мене немає компанії)\nі платтячка подивимось, і поговоримо)'),
 ('uk', '@1705Belka у Сб будеш ще тут?)'),
 ('uk',
  '@1705Belka в сееенсі одна?\n\nскажи мені, коли ти вільна, і ми зустрінемось😊'),
 ('uk',
  '@1705Belka Лю, я тебе бачила в місті о сьомій, кричала тобі "Люю, ало", а ти говорила по телефону, зірко😦'),
 ('uk', '@sergeykovaliov як варіант😅'),
 ('uk', 'Прикро, коли людина кидається словами на вітер.'),
 ('uk', '@nastya_dubyna дякую, зірко😊😙'),
 ('ru', '@shylodzobkaa Ооой, дякуююю😍'),
 ('uk', '@vika_kopytko Пасііібочкі, кіцьося😍'),
 ('uk',
  '@no_false @Gvrtsss Я тебе запевняю, абсолютно рівноцінний, ти навіть залишаєшся у плюсі😂'),
 ('uk',
  'Дівчата, зацініть😊\rТам сірий, а де білий - мармур😉 https://t.co/bYyQ5GzIj3'),
 ('ru',
  '@no_false @Gvrtsss Ну я тебе зафолловила, рахуй мене замість всіх тих 50-ти😁'),
 ('uk',
  '(можете скидати свій інстаграм сюди, спробуємо взаємно) https://t.co/B3VMNcxFIH'),
 ('uk',
  'Ну нічого-нічого, скоро і моя інста стане популярною і всі будуть такі мол огоо Ладка яка ти класна, а я така оо дякую цьом-цьом.'),
 ('uk',
  'Випадково натрапила у стрічці інстаграму на фото дівчинки з Кирилівки.\nСловом, Ма вже годину слухає, як я хочу до моря😁🌊'),
 ('ru', '@Gvrtsss Ооо, точно не забуваю😁❤'),
 ('und', '😂 https://t.co/6cRHeMHW2g'),
 ('uk', '@Gvrtsss Нащо так хот?)'),
 ('uk', 'класно, коли приходять вибачатись з піцою😁🙈'),
 ('uk',
  "@MR_ta_sha_ @Irasaduk3 Ну не золоті гори ж. Звичайно хочеться, аби партнер мав кошти навіть на банальну кав'ярню.\rК… https://t.co/FaPYXAZewP"),
 ('uk',
  '@MR_ta_sha_ @Irasaduk3 Любов, обійми та увага - те, що може дати кожен.\rДіти ж вимагають матеріального у наш вік.'),
 ('uk', '@Irasaduk3 А ЩЕ КРИЧАТЬ, ПЛАЧУТЬ І ВІЧНО ЧОГОСЬ ХОЧУТЬ'),
 ('uk',
  '@k_telichyk @doctor_diana_ Там скраб, пінка і тонік.\rДуже раджу, дійсно😉 https://t.co/5zKfomx37l'),
 ('uk',
  '@k_telichyk @doctor_diana_ Ой, дівчата, в мене взагалі був завал з цим.\rЗараз користуюсь деякими штучками, допомага… https://t.co/kiYL5bFH47'),
 ('uk',
  "Такий цікавий поворот життя: коли тобі стає все одно на людину, вона про тебе згадує і нав'язується."),
 ('uk', '@kzelenetska Острог, Рівненщина)'),
 ('uk', '@_Rzaeva бліін, конверси😱'),
 ('ru', '@David_Bugnar Лада😉'),
 ('ru', '@uuuiiiooonnn Вітаюю😊💋'),
 ('uk', '@Krammer_S133 цьом-цьом💋'),
 ('uk', '@free_vogel цьомчики😊💋'),
 ('uk', '@desperateeee о, це я'),
 ('uk',
  '@desperateeee а то наступного разу дійсно не втримаєшся і прикрасиш комусь личко)'),
 ('uk',
  '@desperateeee ахаха, боже, тоді з тобою небезпечно заганятись, бо треба знати межу)'),
 ('uk', '@desperateeee раз закипів, значить було занадто образливо)'),
 ('uk',
  'Чи багато у вас є таких людей, з якими ви можете позаганятись одне з одного і не почути у відповідь обідок?\nЦінуйте ;)'),
 ('ru', '@Gvrtsss у тебе татуха котика?)'),
 ('uk',
  '@cannelura З Днем народження, квіточко☺\rКохання, хороших друзів поруч😉\rДосягай своїх вершин лише злетами, падіння не для тебе❤\rЦьом💋'),
 ('uk', '@Step_gluon_ Це був перший кущ у моєму житті, який вміє бігати😂'),
 ('uk',
  "@Step_gluon_ ну спочатку, чесно кажучи, я ледь не вдарила той 'кущ'😂, а потім від страху в мене підкосились ноги, т… https://t.co/C3qIkUkKI9"),
 ('ru', '@Step_gluon_ А в мене ледь серце не стало, я лякана чомусь :)'),
 ('uk', '@rgznsk Вдачі, зірко😉'),
 ('uk', 'Дивіться, яка кицюня^^ https://t.co/i5t2kSaWcd'),
 ('uk', 'RT @Olga_Mol: настрій: https://t.co/29h3MFHPTC'),
 ('uk',
  '@sandorski23 Якась людина сиділа в кущах, вся в листочках і гілочках, коли я йшла повз кущі, встала бляха і побігла на мене!'),
 ('uk',
  'Уявіть мій шок, коли опів на першу ночі ти йдеш біля будинку, а там кущ встає і починає бігти на тебе!😲'),
 ('ru', '@rose_hipses Залюбки :)\rЧекаю тебе в дм'),
 ('uk',
  '@rose_hipses Я не писала заради срачу, просто цікаво почути твою думку)'),
 ('ru', '@sexyalkash Оой, класна яка😍😊'),
 ('uk', '@rose_hipses А чому проти?)'),
 ('uk',
  '@Gvrtsss Ооооо да🙄\rОт в тебе точно вобщє не цікавий тві ні разу, ага, і ти вобщє для мене нічого не означаєш, ок'),
 ('uk',
  '@kristina15061 ще одна, господи\n\nне нииий, скока можна, ти ж зірка, не сприймай весь негатив на свій рахунок💋'),
 ('uk', '@Bojda1415 о, а ти там до чого?\nтвій Тві один моїх улюблених'),
 ('uk', 'Твіт щирої подяки людям, які ведуть свій Тві ніачом😁'),
 ('uk',
  'Аахахаха, отак іноді зайдеш на чийсь Тві, почитаєш твіти і радієш, що ти не така😂'),
 ('uk', 'Рік минув, а проблеми залишаються. https://t.co/HP1p1cE1VT'),
 ('uk',
  'Ну все розумію, але нащо було змінювати форму фотографії профілю?\nКвадратик мені більше подобався😐'),
 ('uk',
  '@MR_ta_sha_ Ну нарешті в тебе хороший настрій ;)\rЧастіше ходи на роботу)'),
 ('uk',
  'Зірко @kristina15061 !\rЗ твоїм днем, будь щасливою😗\rТільки з ціллю наше життя набуває сенсу, тож знайди ціль у житті та впевнено йди до неї❤'),
 ('uk', '@MR_ta_sha_ Ого, що це за ваніль?)'),
 ('uk', '@miss_sunshine57 @1705Belka Та й вона взагалі класна😁😍'),
 ('uk', '@Gvrtsss А, боже, думала, то твій\rЄслі не твій - то не норм)))'),
 ('ru', '@Gvrtsss Любить значить))'),
 ('uk', '@kit_kaat69 Кіцьося😍'),
 ('en',
  'RT @Iostinstars: when a star meets a black hole\n https://t.co/fvMc7prAbp'),
 ('uk',
  'Те відчуття, коли твій одноліток набив собі тату з твоїм ескізом😱\n\n/Успєх?\\'),
 ('uk', 'І тепер весь Острог мені пахне його парфумом..'),
 ('ru', '@nimnoho Ахаха, немає чого ;)'),
 ('uk', '@nimnoho До моря :)'),
 ('uk',
  "Відправили нашого мужчинчика в Польщу.\rОтепер моя сім'я - жіноче царство😂"),
 ('uk',
  'Забронювали номери в готелі, вирішили, якими областями будемо їхати, розпланували кожну годину нашої поїздочки.\nЧи не щастя?😌'),
 ('und', '@kzelenetska lavoytko'),
 ('uk',
  'RT @Cherries_UP: Безвізова карта світу для українців: https://t.co/Wx9thwzo1T https://t.co/uChGSAtV0U'),
 ('uk',
  '@desperateeee а в житті відразу видно, хто, як і чим живе)\nпо переписочкам буде здаватись ідеальною, а от у житті..'),
 ('ru', '@desperateeee ну тоді не ведись))'),
 ('uk',
  '@desperateeee сказала б не ведись, але знаю, що це не сильно й допоможе)'),
 ('uk', '@desperateeee в тихому омуті сам знаєш, що водиться ;)'),
 ('uk', '@desperateeee фу, а не дівчата'),
 ('uk', 'боже заганятись одне з одного це так класно'),
 ('ru', '@__danylynch ахахаха, майже)'),
 ('uk',
  '@cookie_oliver @kristina15061 Нуу, краще пізніше мати орео з США, ніж не мати взагалі😁'),
 ('uk',
  '@cookie_oliver @kristina15061 У тебе зооовсім випадково немає зайвих 3 доллара?😂'),
 ('ru',
  '@cookie_oliver @kristina15061 Азахахаха, тооочно, ти ж в ЮЕсЕй😁\rДороге там орео?)'),
 ('uk',
  "Хочеться орео з якимись незвичними смаками типу м'яти😍\rХто там в США, не хо' мені привезти малееньку пачечку орео?😅"),
 ('uk',
  '@Dei_a_Nattiee @westwitch_ та ну, орео класне, просто надто прорекламоване'),
 ('uk', '@westwitch_ БОЖЕ ТИ ВТРАЧАЄШ НАДТО БАГАТО'),
 ('uk',
  '*розмова дітей*\n- Чому ти образилась?\n- Бо ти пішов!\n- Так ти ж мені сказала йти?\n- А може я не хотіла, щоб ти йшов?\n\nОце жіночка росте ;)'),
 ('uk', 'RT @fabrytskk: найкраще https://t.co/fBYRznL1hA'),
 ('uk',
  '@lera_chornei Є пекінес Марся (малюк❤), який почасти спить на мені і я просто не можу йти спати, бо розбуджу його,… https://t.co/VEpPFqBoIh'),
 ('uk',
  'Перша година ночі.\rЧим займається Лада?\rЛада переглядає відео з моря, бо її пробрала ностальгія😅'),
 ('ru', '@Nastia_Levine чур я головна дружка😂'),
 ('uk', '@sergeykovaliov мої вітання ;)'),
 ('uk',
  'RT @Dashka_Le: Зараз би сидіти на березі моря і бездумно дивитися вдалину'),
 ('und', 'RT @qooter2707: https://t.co/TIjKb5U9MP'),
 ('uk',
  '@olia_princes видно ж фотошоп, особливо, на лівій руці)\nскоріше за все, там, де мав би бути пупок, був небажаний надпис магазину ;)'),
 ('uk', '@_Rzaeva отак оце лайкай тебе\n/lavoytko\\'),
 ('uk', '@_Rzaeva шо та, шо та задєлі чувства'),
 ('uk', "@_Rzaeva а ще Мар'ям в інсті невзаємна!!!"),
 ('uk', '@reality_peace Вдачі😇'),
 ('uk',
  '@I_nonsenses нє, алік для простих смертних)\n+ чекати довго, а мені вже терміни підбігають'),
 ('ru', '@doitnowwww радію за тебе!)\n\n/я ж казала, що все буде добре💋\\'),
 ('und', 'RT @archillect: https://t.co/Y5OA3NIRiP'),
 ('uk', '@Dashaaa5 добре тобі відпочити ;)'),
 ('und', '@Chippoloni 😉 https://t.co/YzgT5Ju7U6'),
 ('uk',
  '@doitnowwww головне - не переживай, бо ти все знаєш, а на екзамені згадаєш навіть те, що не повторюєш перед екзаменом)\nвдачі💋😉'),
 ('uk',
  '@doitnowwww але я щиро сподіваюсь, що ти все здасиш і все у тебе буде добре ;)'),
 ('uk',
  '@doitnowwww оскільки це буде показувати нездатність вчителів підготувати дітей до екзамену, а також те, що знання, які вони дають, хибні.'),
 ('uk',
  '@doitnowwww дійсно, багато залежить від вчителів, але їм не вигідно завалювати дітей і за екзамен ставити нижчі оці… https://t.co/cVU7asBYGl'),
 ('uk', 'якщо діти - це квіти життя, то я не садівник😅'),
 ('uk', "@nimnoho або ще 'не подобається, то не дивись!'😅"),
 ('uk',
  "@nimnoho дуже складно, особливо, коли ця людина має свою думку на щот 'стіля', а той 'стіль' не стільний савсєм"),
 ('uk', '@nimnoho нє, такі нє\r\rпросто полосаті - дуже класні'),
 ('uk', '@nimnoho нє, ну полосаті речі класні'),
 ('ru', '@martinovska_ ахахааха, ну це ж образно)'),
 ('uk',
  'Діти, чого ви так паритесь через те ДПА?\nВчителі хороші, ніхто вас не завалить, робіть шпаргалки і не переживайте😉'),
 ('uk',
  'RT @desperateeee: Ми всі носим маски, та насправді ми всі одинакові. https://t.co/O7NxPgSEJY'),
 ('uk',
  '@le_sorcier_noir а що як жінка сама собі не подобається без макіяжу?\r\r+ можна ж робити природній мейк-ап, який не в… https://t.co/l4CrFuqZxG'),
 ('ru', 'RT @treschenko24: Очень сильно.\n https://t.co/7kXFncfKyA'),
 ('en', 'RT @bubblestbh: Me af https://t.co/K292an6vCC'),
 ('und', 'RT @youmaximalism: https://t.co/XsfJsAwkyh'),
 ('und', 'RT @youminimalism: https://t.co/On2LP0H9LW'),
 ('uk', '@Kv1ten Кожному своє ;)'),
 ('uk', 'бути самозакоханою егоїсткою не так вже й погано.'),
 ('uk', '@Dashaaa5 о це я'),
 ('uk',
  '@Nastia_Levine всьооо, отлічноо, значить, буду замовляти\n(якби можна було б, я б дала тобі в оренду😂)'),
 ('uk', '@nik_show скільки б віддав за таку?'),
 ('uk',
  '@Olegalas у скорому часі буду мати таких декілька штук ;)\nзможеш замовити, тобі віддам зі знижечкою))'),
 ('uk',
  '@Olegalas огоо, навіть сам Декс хо футболочку з моїм дизайном\n\nможна вже тішитись?)'),
 ('uk',
  '❗️ЕТЕНШН❗️\n\nТві, хотіли б собі таку футболочку? https://t.co/FZF4BlfPQJ'),
 ('uk', '@mk_Faradej Ой, ти теж не льсті😁'),
 ('ru', 'Ой, гороскоп, ну не льсті https://t.co/wUGj5x97UY'),
 ('ru', 'Не подходите слишком близко, я тигрёныш, а не киска!!!!'),
 ('uk', '@miss_sunshine57 Оо, а які босоніжки?'),
 ('uk',
  'RT @shurik_bortsov: І якщо ти знову захочеш війну, ти натякай, ми повторим мою перемогу.'),
 ('uk', '@sandorski23 тобі який віршик треба?)'),
 ('ru', '@sandorski23 Ооо, я можу'),
 ('uk', '@Serg_Tarar пасібочкі)\rА на рахунок фільму - він аж надто класний)'),
 ('uk',
  'Із запізненням, але 2,5 годинки не пройшли дарма ;) https://t.co/odPG6ogg40'),
 ('uk', 'не дай шуму чужих думок перебити твій внутрішній голос.'),
 ('uk', '@Gvrtsss В серпні, Гварця, в серпні❤'),
 ('uk',
  '@Gvrtsss В мене все літо в поїздках, вже через декілька тижнів їду з Острога і аж до липня, а потім знову і аж до серпня)'),
 ('uk', '@Gvrtsss В серпні вже)'),
 ('uk', '@Gvrtsss Я на кінець червня буду вже не вдома)'),
 ('uk',
  '@kzelenetska то це не екзамен))\nякщо вчителі у вас хороші, то дадуть списати, бо їм не вигідно, аби ви написали на… https://t.co/6pwT9pkzmq'),
 ('uk', '@kzelenetska ДПА чи ЗНО?'),
 ('ru', '@Gvrtsss не до мене, уви)'),
 ('uk', 'Мої зірки-квітки, до яких невимовно звикла🙈 https://t.co/dSf2XJZrT8'),
 ('uk',
  'А от у вас вкладається в голові, що уже завтра останній дзвоник, а через 6 днів - літо?\n\nОт і у мене ні.'),
 ('uk', '@Gvrtsss Ой сонце, тоді відпускаю тебе)❤'),
 ('ru', '@Gvrtsss Ніпаняяятна. \n\nШо за хайп?😁'),
 ('uk', '@cookie_oliver А де красівий фотоотчьот?'),
 ('uk',
  '@desperateeee хоча десь там трохи нижче був твіт пошуку перцевого балончику, бо Острог повен всяких різних нехороши… https://t.co/hXWwsj5psI'),
 ('uk', '@desperateeee але ні, я ще юна занадто для такого😅'),
 ('ru', '@desperateeee АЗАХАХАХХАА ВИНЕСЛО'),
 ('uk', '@desperateeee я теж не завжди😅\n\nале іноді пробиває на таке)'),
 ('uk',
  '@desperateeee отооож😅\n\nале, знаєш, раніше я так само казала на морську капустку та кальмарів😍'),
 ('uk',
  '@desperateeee Ооу, у мене це недавня любов, але господибоже, які ж вони смачні😍'),
 ('uk',
  'Цілий день нити про мідії, прийти додому і побачити кг мідій - рай на землі😍\nМамуля, ilu❤'),
 ('uk', 'Проблема команди РГМ-у в тому, що всю гру спихають на Борю🙄'),
 ('uk', '@__queenfrost__ Блін, ану перенось всі свої твіти класні сюди!'),
 ('ru', '@Olka3001 Ждужду'),
 ('uk', '@Olka3001 А тема твору яка була?'),
 ('uk', '@Olka3001 Важко було?'),
 ('uk', 'Як ваше ЗНО, острозькі?\nРозказуйте.'),
 ('uk', '@hrybovskiy твій 30😉'),
 ('uk',
  '@__danylynch сонце ясне, я запитую у Тві тільки через те, що у книжковому магазині я не знайшла жодного такого журналу/книжки ;)'),
 ('ru', 'л о ж н ы е  н а д е ж д ы'),
 ('uk', '@desperateeee Вдачі)'),
 ('uk',
  'Ранку, мої наймиліші❤\nВдалого вам початку тижня, а вам, ЗНОшники, терпіння😉'),
 ('uk', '@jupiter_ju оу, в нас однакові щоденники😁'),
 ('uk', '@Nastia_Levine Зберегла😍'),
 ('uk', 'Порадьте, де можна купити перцевий балончик в Острозі?'),
 ('uk',
  '@miss_sunshine57 ти одна з нас, все втрачено😁\n\n/дорослі баби чи молоденькі?/'),
 ('uk',
  "Останній важкий тиждень школи пережито😉\nЗалишилось ще тиждень походити 'для галочки'🙄"),
 ('und', '#loveislove https://t.co/67DmO2za0e'),
 ('uk', 'А тепер давайте навчимо Ладу користуватись фейсбуком😁'),
 ('uk',
  'Отоож, тві, го на фейсбук?😁\nВсіх люблю, всіх прийму❤ https://t.co/Wwe6EPeCTB'),
 ('ru', '@Bojda1415 Додавайся ;) https://t.co/sK1mfd3SPT'),
 ('uk', '@happynun_in Вже відключив)'),
 ('uk', 'Дякую, #Київстар, за відключений вк!🙄\n#Вконтакте'),
 ('uk',
  'RT @ukrposhtag: Коли заблокували #ВКонтакте та #Однокласники, але тобі ще є що сказати https://t.co/8QiQruowUh'),
 ('ru', '@MR_ta_sha_ сильно.'),
 ('uk',
  "Заходиш у діалог, бачиш повідомлення: 'Бігав і фотографував тебе', не розумієш, що до чого, а там фоточки заходу сонця☀😇\np.s. #яумамисонечко"),
 ('uk', '@Mayovska_ Всмиислі'),
 ('ru', '@MR_ta_sha_ все-все, втрачай надію на краще'),
 ('uk',
  '@MR_ta_sha_ боже тут просто комбо\nдо мене на Ви і ще й підстраюватись під мене'),
 ('uk', '@MR_ta_sha_ все з вами втрачено'),
 ('uk', "@MR_ta_sha_ щас би поняти тільки після мого раз'яснєнія"),
 ('uk', '@MR_ta_sha_ ну там не твіти класні\nа\nлюди\nякі\nїх\nпишуть\n...'),
 ('uk', '@MR_ta_sha_ @Ironka_tw ну а тут щас перевод на особистості 😏'),
 ('uk', '@MR_ta_sha_ @Ironka_tw ну правильно, бо вона ж від мене😏'),
 ('en', 'Imagine Dragons - whatever it takes😁 https://t.co/OLpR9jcAhv'),
 ('uk', 'RT @sandorski23: @onlyforulonely Заєбісь, жизнь удалась ©Гварця'),
 ('uk', 'Те відчуття, коли Кінга дають на позакласне читання😏'),
 ('ru', 'RT @cliqqque: Состояние чисто: https://t.co/zbf7mOfkNm'),
 ('ru', '@MR_ta_sha_ АХАХХАХА, боже, дякую за твої твіти)))'),
 ('und', 'RT @archillect: https://t.co/QA0R8zEhuN'),
 ('uk', '@Zaveruxa2016 крик душі?😀')]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">detect</span><span class="p">(</span><span class="s2">"Ну нічого-нічого, скоро і моя інста стане популярною і всі будуть такі мол огоо Ладка яка ти класна, а я така оо дякую цьом-цьом."</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[24]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>'uk'</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">user_info</span><span class="o">.</span><span class="n">_json</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[12]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'contributors_enabled': False,
 'created_at': 'Sun Feb 15 18:20:38 +0000 2015',
 'default_profile': False,
 'default_profile_image': False,
 'description': 'занадто хороша(загадкова) для цього світу. чому б вам не мислити позитивно? бути бажаною, але не бажати нікого. малюю, яжхудожник. make art, be art☀️ #УкрТві',
 'entities': {'description': {'urls': []},
  'url': {'urls': [{'display_url': 'instagram.com/lavoytko/',
     'expanded_url': 'http://www.instagram.com/lavoytko/',
     'indices': [0, 23],
     'url': 'https://t.co/aQVTV4rjd4'}]}},
 'favourites_count': 8970,
 'follow_request_sent': False,
 'followers_count': 742,
 'following': False,
 'friends_count': 407,
 'geo_enabled': True,
 'has_extended_profile': True,
 'id': 3039405867,
 'id_str': '3039405867',
 'is_translation_enabled': False,
 'is_translator': False,
 'lang': 'uk',
 'listed_count': 7,
 'location': 'Ostroh',
 'name': 'Ладка-загадка',
 'notifications': False,
 'profile_background_color': 'FFE1FF',
 'profile_background_image_url': 'http://pbs.twimg.com/profile_background_images/680744166448586756/YzP1xEOs.jpg',
 'profile_background_image_url_https': 'https://pbs.twimg.com/profile_background_images/680744166448586756/YzP1xEOs.jpg',
 'profile_background_tile': False,
 'profile_banner_url': 'https://pbs.twimg.com/profile_banners/3039405867/1487621844',
 'profile_image_url': 'http://pbs.twimg.com/profile_images/833772292610064385/GCkqLpYQ_normal.jpg',
 'profile_image_url_https': 'https://pbs.twimg.com/profile_images/833772292610064385/GCkqLpYQ_normal.jpg',
 'profile_link_color': 'FA8072',
 'profile_location': None,
 'profile_sidebar_border_color': 'C0DEED',
 'profile_sidebar_fill_color': 'DDEEF6',
 'profile_text_color': '333333',
 'profile_use_background_image': True,
 'protected': False,
 'screen_name': 'onlyforulonely',
 'status': {'contributors': None,
  'coordinates': None,
  'created_at': 'Fri Jun 23 09:58:12 +0000 2017',
  'entities': {'hashtags': [],
   'symbols': [],
   'urls': [],
   'user_mentions': [{'id': 3251695756,
     'id_str': '3251695756',
     'indices': [0, 16],
     'name': 'A n a s t a s i i a',
     'screen_name': 'anastasiiareshe'}]},
  'favorite_count': 1,
  'favorited': False,
  'geo': None,
  'id': 878190442482982912,
  'id_str': '878190442482982912',
  'in_reply_to_screen_name': 'anastasiiareshe',
  'in_reply_to_status_id': 878185832733171712,
  'in_reply_to_status_id_str': '878185832733171712',
  'in_reply_to_user_id': 3251695756,
  'in_reply_to_user_id_str': '3251695756',
  'is_quote_status': False,
  'lang': 'uk',
  'place': None,
  'retweet_count': 0,
  'retweeted': False,
  'source': '<a href="http://www.twitter.com" rel="nofollow">Twitter for Windows</a>',
  'text': '@anastasiiareshe Подякувала😇',
  'truncated': False},
 'statuses_count': 4323,
 'time_zone': 'Kyiv',
 'translator_type': 'none',
 'url': 'https://t.co/aQVTV4rjd4',
 'utc_offset': 10800,
 'verified': False}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [324]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">my_friends</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="s1">'ArnauAndreu'</span><span class="p">)</span>

<span class="n">my_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">my_followers</span><span class="p">)</span>

<span class="n">Counter</span><span class="p">([</span><span class="n">friend</span><span class="o">.</span><span class="n">lang</span> <span class="k">for</span> <span class="n">friend</span> <span class="ow">in</span> <span class="n">my_friends</span><span class="p">])</span>

<span class="n">my_fr_txts</span><span class="p">,</span> <span class="n">my_friends_lang</span> <span class="o">=</span> <span class="n">get_twts_from_list_account_names</span><span class="p">(</span><span class="n">my_friends</span><span class="p">)</span>

<span class="c1">#Counter(my_friends_lang)</span>



<span class="c1"># my_fr_langs_detected=[]</span>
<span class="c1"># for i,txt in enumerate(my_fr_txts):</span>
<span class="c1">#     #print(i, txt)</span>
<span class="c1">#     try:</span>
<span class="c1">#         my_fr_langs_detected.append(detect(txt))</span>
<span class="c1">#     except:</span>
<span class="c1">#         continue</span>

<span class="c1">#Counter(my_fr_langs_detected)</span>

<span class="n">usr_tl</span> <span class="o">=</span> <span class="n">get_account_timeline</span><span class="p">(</span><span class="n">my_friends</span><span class="p">[</span><span class="mi">44</span><span class="p">]</span><span class="o">.</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">max_num</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">df_try</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">twt</span><span class="o">.</span><span class="n">_json</span> <span class="k">for</span> <span class="n">twt</span> <span class="ow">in</span> <span class="n">usr_tl</span><span class="p">])</span>
<span class="n">df_try</span><span class="o">.</span><span class="n">columns</span>

<span class="n">my_tl</span> <span class="o">=</span> <span class="n">get_account_timeline</span><span class="p">(</span><span class="s1">'ArnauAndreu'</span><span class="p">,</span> <span class="n">max_num</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="DYNAMO-KIEV-PLAYERS">DYNAMO KIEV PLAYERS<a class="anchor-link" href="#DYNAMO-KIEV-PLAYERS">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [27]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># DYNAMO PLAYERS</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">"http://www.worldfootball.net/teams/dinamo-kiev/2017/2/"</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">"lxml"</span><span class="p">)</span>

<span class="n">dynamo_players</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf8'</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

<span class="n">dynamo_players</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[27]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array(['Maksim Koval', 'Artur Rudko', 'Antunes', 'Mykyta Burda',
       'Tamás Kádár', 'Evgen Khacheridi', 'Pavlo Lukyanchuk',
       'Bogdan Mykhaylychenko', 'Zurab Ochihava', 'Aleksandar Pantić',
       'Oleksandr Tymchyk', 'Domagoj Vida', 'Vitaliy Buyalskiy',
       'Valeriy Fedorchuk', 'Denys Garmash', 'Nikita Korzun',
       'Mykyta Kravchenko', 'Mikola Morozyuk', 'Pavel Orekhovskiy',
       'Serhiy Rybalka', 'Volodymyr Shepeliev', 'Sergiy Sydorchuk',
       'Viktor Tsygankov', 'Artem Besedin', 'Derlis González',
       'Roman Yaremchuk', 'Andriy Yarmolenko', 'Sergiy Rebrov'], dtype=object)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [56]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dyn_play_countr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf8'</span><span class="p">)[</span><span class="mi">1</span><span class="p">][[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

<span class="n">dyn_play_countr</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PYMONGO">PYMONGO<a class="anchor-link" href="#PYMONGO">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pymongo</span> <span class="k">import</span> <span class="n">MongoClient</span>

<span class="n">conn</span><span class="o">=</span><span class="n">MongoClient</span><span class="p">()</span>

<span class="c1">#define database</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">citylangs</span>

<span class="c1">#define collection inside database</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">bcn</span><span class="o">.</span><span class="n">ajuntam</span><span class="o">.</span><span class="n">followers</span>

<span class="c1"># function to add documents to collection </span>
<span class="k">def</span> <span class="nf">make_followers_collection</span><span class="p">(</span><span class="n">account_name</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">max_num</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">wait_on_rate_limit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_on_rate_limit_notify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">followers</span><span class="p">,</span> <span class="n">screen_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">max_num</span><span class="p">)</span>
    <span class="c1">#i = 0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">_json</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">'Read timed out'</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'fall here'</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">16</span><span class="p">)</span>
                <span class="n">user</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="c1">#print ("@" + user.screen_name)</span>
    <span class="c1">#return collection</span>

<span class="n">make_followers_collection</span><span class="p">(</span><span class="s1">'bcn_ajuntament'</span><span class="p">,</span><span class="n">collection</span><span class="p">,</span> <span class="n">max_num</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1">#check what databases are available</span>
<span class="n">conn</span><span class="o">.</span><span class="n">database_names</span><span class="p">()</span>

<span class="c1"># available collections inside db</span>
<span class="n">db</span><span class="o">.</span><span class="n">collection_names</span><span class="p">()</span>

<span class="n">collection2</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">kiev</span><span class="o">.</span><span class="n">ukrpravda</span>

<span class="n">make_followers_collection</span><span class="p">(</span><span class="s1">'ukrpravda_news'</span><span class="p">,</span><span class="n">collection2</span><span class="p">,</span> <span class="n">max_num</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">citylangs</span><span class="o">.</span><span class="n">kiev</span><span class="o">.</span><span class="n">ukrpravda</span><span class="o">.</span><span class="n">find</span><span class="p">())</span>

<span class="n">Counter</span><span class="p">([</span><span class="n">obj</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">l</span><span class="p">])</span>


<span class="n">db</span><span class="o">.</span><span class="n">collection_names</span><span class="p">()</span>

<span class="c1">#db.categories.insert_one({ "_id": "ukr_pravda", "children": [] })</span>
<span class="c1"># db.categories.insert({ _id: "avto_kiev", children: [] })</span>
<span class="c1"># db.categories.insert({ _id: "kiev", children: ["ukr_pravda", "avto_kiev"] })</span>

<span class="n">db</span><span class="p">[</span><span class="s1">'kiev'</span><span class="p">]</span><span class="o">.</span><span class="n">insert_one</span><span class="p">({</span><span class="s1">'avto_kiev'</span><span class="p">:[],</span><span class="s1">'vitklitschko'</span><span class="p">:[]})</span>

<span class="n">db</span><span class="o">.</span><span class="n">collection_names</span><span class="p">()</span>

<span class="n">rr</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="p">[</span><span class="s1">'bcn.ajuntam.followers'</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">())</span>

<span class="n">db</span><span class="p">[</span><span class="s1">'kiev'</span><span class="p">]</span><span class="o">.</span><span class="n">find_one</span><span class="p">()</span>

<span class="n">db</span><span class="p">[</span><span class="s1">'bcn.ajuntam.followers'</span><span class="p">]</span>

<span class="n">conn</span><span class="o">.</span><span class="n">database_names</span><span class="p">()</span>

<span class="n">coll2</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">countries</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="MERGE-DFs">MERGE DFs<a class="anchor-link" href="#MERGE-DFs">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [218]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#get hdf database keys</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span><span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_keys</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [221]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">my_keys</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[221]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>['/ukr_nodes/news/BBC_ua/followers',
 '/ukr_nodes/news/BBC_ua/tls_followers',
 '/ukr_nodes/news/HromadskeUA/followers',
 '/ukr_nodes/news/HromadskeUA/tls_followers',
 '/ukr_nodes/news/LIGAnet/followers',
 '/ukr_nodes/news/LIGAnet/tls_followers',
 '/ukr_nodes/news/ukrpravda_news/followers',
 '/ukr/starsystem/s_vakarchuk/followers',
 '/ukr/starsystem/s_vakarchuk/tls_followers',
 '/ukr/politics/Vitaliy_Klychko/followers',
 '/ukr/politics/Vitaliy_Klychko/tls_followers',
 '/cat_nodes/news/LaVanguardia/followers',
 '/cat_nodes/news/LaVanguardia/tls_followers',
 '/cat_nodes/news/diariARA/followers',
 '/cat_nodes/news/diariARA/tls_followers',
 '/cat/news/elperiodico/followers',
 '/cat/news/elperiodico/tls_followers',
 '/cat/cities/TGNAjuntament/followers',
 '/cat/cities/TGNAjuntament/tls_followers',
 '/cat/cities/aj_vic/followers',
 '/cat/cities/aj_vic/tls_followers',
 '/cat/cities/ajterrassa/followers',
 '/cat/cities/ajterrassa/tls_followers',
 '/cat/cities/bcn_ajuntament/followers',
 '/cat/cities/bcn_ajuntament/tls_followers',
 '/cat/cities/girona_cat/followers',
 '/cat/cities/girona_cat/tls_followers']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [234]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">aa</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'lang_data.h5'</span><span class="p">,</span> <span class="s1">'/ukr_nodes/news/BBC_ua/followers'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [235]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">aa</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[235]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>ru       2626
uk       1770
en        505
pl         30
ro         13
en-gb      11
hu          6
ar          6
tr          6
es          4
fr          3
ja          3
de          3
pt          3
sk          3
ko          2
bg          1
it          1
nl          1
zh-cn       1
el          1
vi          1
Name: lang, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [164]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_path</span> <span class="o">=</span> <span class="s1">'lang_data.h5'</span>
<span class="n">country</span> <span class="o">=</span> <span class="s1">'cat'</span>
<span class="n">acc_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'diariARA'</span><span class="p">,</span> <span class="s1">'LaVanguardia'</span><span class="p">]</span>
<span class="n">load_node1</span> <span class="o">=</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">country</span> <span class="o">+</span> <span class="s1">'_nodes/news/'</span> <span class="o">+</span> <span class="n">acc_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'/tls_followers'</span>
<span class="n">load_node2</span> <span class="o">=</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">country</span> <span class="o">+</span> <span class="s1">'_nodes/news/'</span> <span class="o">+</span> <span class="n">acc_names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'/tls_followers'</span>

<span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">load_node1</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">load_node2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [165]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'outer'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [166]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_merged</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">df1</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">df2</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[166]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>((44937, 2), (34461, 2), (12181, 2))</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [180]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Using matplotlib backend: MacOSX
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[180]:</div>
<div class="output_text output_subarea output_execute_result">
<pre><matplotlib.legend.legend at 0x12a432550></pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="TWITTER-RANDOM-WALK">TWITTER RANDOM WALK<a class="anchor-link" href="#TWITTER-RANDOM-WALK">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#1. Start from mayor, city hall account, etc...</span>

<span class="c1">#2. Get a follower from the city (or county, oblast) as first node</span>

<span class="c1">#3. Get follower of step2 node</span>

<span class="c1">#4. Repeat step3 with new nodes until max number of nodes is reached</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>
<span class="n">user_info</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="s1">'Vitaliy_Klychko'</span><span class="p">)</span>  
<span class="n">user_info</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#use key words ['Kiev','Kyiv',]</span>
<span class="n">acc_ntw</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="n">account_name</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="s1">'followers'</span><span class="p">,</span> <span class="n">max_num</span> <span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">key_words</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [70]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cit_obl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Біла Церква'</span><span class="p">,</span> <span class="s1">'Бровари'</span><span class="p">,</span> <span class="s1">'Бориспіль'</span><span class="p">,</span> <span class="s1">'Фастів'</span><span class="p">,</span> <span class="s1">'Ірпінь'</span><span class="p">,</span>
        <span class="s1">'Васильків'</span><span class="p">,</span> <span class="s1">'Боярка'</span><span class="p">,</span> <span class="s1">'Вишневе'</span><span class="p">,</span> <span class="s1">'Обухів'</span><span class="p">,</span>
        <span class="s1">'Переяслав-Хмельницький'</span><span class="p">,</span> <span class="s1">'Буча'</span><span class="p">,</span> <span class="s1">'Славутич'</span><span class="p">,</span> <span class="s1">'Яготин'</span><span class="p">,</span> <span class="s1">'Вишгород'</span><span class="p">,</span>
        <span class="s1">'Сквира'</span><span class="p">,</span> <span class="s1">'Березань'</span><span class="p">,</span> <span class="s1">'Богуслав'</span><span class="p">,</span> <span class="s1">'Тетіїв'</span><span class="p">,</span> <span class="s1">'Українка'</span><span class="p">,</span> <span class="s1">'Кагарлик'</span><span class="p">,</span>
        <span class="s1">'Тараща'</span><span class="p">,</span> <span class="s1">'Миронівка'</span><span class="p">,</span> <span class="s1">'Узин'</span><span class="p">,</span> <span class="s1">'Ржищів'</span><span class="p">,</span> <span class="s1">'Чорнобиль'</span><span class="p">,</span> <span class="s2">"Прип'ять"</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [71]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acc_ntw</span> <span class="o">=</span> <span class="n">get_account_network</span><span class="p">(</span><span class="s1">'huyova_bc'</span><span class="p">,</span> <span class="n">rel_type</span><span class="o">=</span><span class="s1">'followers'</span><span class="p">,</span> <span class="n">max_num</span> <span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">key_words</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>0%                          100%
[##############################] | ETA: 00:00:00
Total time elapsed: 00:00:06
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [72]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">list_data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">acc</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'followers_count'</span><span class="p">],</span> 
  <span class="n">acc</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'statuses_count'</span><span class="p">],</span> 
  <span class="n">acc</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'screen_name'</span><span class="p">],</span> 
  <span class="n">acc</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'location'</span><span class="p">],</span> 
  <span class="n">acc</span><span class="o">.</span><span class="n">_json</span><span class="p">[</span><span class="s1">'lang'</span><span class="p">])</span> <span class="k">for</span> <span class="n">acc</span> <span class="ow">in</span> <span class="n">acc_ntw</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">list_data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'followers_count'</span><span class="p">,</span><span class="s1">'statuses_count'</span><span class="p">,</span><span class="s1">'screen_name'</span><span class="p">,</span> <span class="s1">'location'</span><span class="p">,</span> <span class="s1">'lang'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [79]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'followers_count'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_sorted</span><span class="p">[</span><span class="s1">'location'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[79]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array(['Worldwide', 'Москва, Россия', 'Kyrzbekistan (Кырзбекистан)',
       'Ukraine ', 'Киев', 'Краматорск, Украина', 'Львів', 'Украина', '',
       'Kyiv', '', 'Україна', '', 'Україна', 'Zhytomyr', 'Украина',
       'SPACE', '', '', 'Санкт-Петербург, Россия', 'Украина', '', 'Минск',
       'Царствие Небесное', 'Украина -Донецк! ', 'Житомир', '',
       'Днепропетровск', 'МОСКВА ГРОБ', 'Aфины', '', '', '',
       'Ukraine, Dnepr', '', 'Івано-Франківськ0954573994', '',
       'Львів, Україна ', '', '', '', 'Ukraina', 'г. Николаев', 'Украина',
       '', '', '', '', 'Украина', '', 'Miami, FL', 'Detroit, MI',
       'United States', 'Україна', '', '', 'Украина', 'EU, Latvia', 'Киев',
       '', 'Oleshky, Ukraine', 'Украина', 'Украина, Николаев',
       'Динамо Київ', '', 'Россия', 'Dnipro', 'Россия', 'Харків', '', '',
       '', '', '', '', 'Старобільськ', 'борисполь',
       'Strawberry Fields, Ruthenia', '', 'Львів, Україна | Lviv, Ukraine',
       'Украина', 'Украина', 'Украина', '', 'United States', '', '',
       'Україна єдина', 'Украина', 'мій рідний край моя земля', 'Kiev', '',
       '', 'Украина Лисичанск', '', 'Кремль', 'КрамАТОрськ', 'харків', '',
       '', '', '', '', '', 'Украина, Киев ', '', 'Україна', '', 'Донецк',
       'Kiev Ukraine', 'Украина', 'Украина', '', 'Запорізька область', '',
       'Донецк, Украина', 'Україна, Київ', '', '', '', '', '',
       'Ukraine, Kiev ', 'rotterdam', 'Україна', '', 'Ukraine', '',
       'Rossiya', '', '', '', '', 'Україна', 'Планета земля', '',
       'Kyiv, Ukraine', '', '', '', '', '', 'Новосибирск', '', '', '',
       'Украина', '', 'Біла Церква', '', '', '',
       'Красноармейск, Донецкой област', '', 'канів', '', '',
       'Чернігів - найрідніше місто', 'Katowice, Polska', 'Киев', '', '',
       '', 'Украина', '', '', '', 'Біла Церква', 'Біла Церква', 'Беларусь',
       '', '', '', 'На диване', 'Ukraine, Bila Tserkva', 'Курган, Россия',
       '', 'В ЖОПЕ', '', '', '', '', '', '', 'Україна', '', '', 'Украина',
       'біла церква', '', '', '', '', '', '', '', '', '', '', ''], dtype=object)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [47]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">acc_ntw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_json</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[47]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'blocked_by': False,
 'blocking': False,
 'contributors_enabled': False,
 'created_at': 'Sat Jul 14 14:47:34 +0000 2012',
 'default_profile': False,
 'default_profile_image': False,
 'description': '',
 'entities': {'description': {'urls': []}},
 'favourites_count': 40,
 'follow_request_sent': False,
 'followers_count': 1,
 'following': False,
 'friends_count': 24,
 'geo_enabled': True,
 'has_extended_profile': False,
 'id': 635511528,
 'id_str': '635511528',
 'is_translation_enabled': False,
 'is_translator': False,
 'lang': 'uk',
 'listed_count': 0,
 'live_following': False,
 'location': 'Чернігів',
 'muting': False,
 'name': 'ЇZHAK💙💛',
 'notifications': False,
 'profile_background_color': '000000',
 'profile_background_image_url': 'http://abs.twimg.com/images/themes/theme14/bg.gif',
 'profile_background_image_url_https': 'https://abs.twimg.com/images/themes/theme14/bg.gif',
 'profile_background_tile': False,
 'profile_banner_url': 'https://pbs.twimg.com/profile_banners/635511528/1473463725',
 'profile_image_url': 'http://pbs.twimg.com/profile_images/874988137776377857/WlvqkaQ2_normal.jpg',
 'profile_image_url_https': 'https://pbs.twimg.com/profile_images/874988137776377857/WlvqkaQ2_normal.jpg',
 'profile_link_color': 'FA743E',
 'profile_sidebar_border_color': '000000',
 'profile_sidebar_fill_color': '000000',
 'profile_text_color': '000000',
 'profile_use_background_image': False,
 'protected': False,
 'screen_name': 'EzhMan_UA',
 'statuses_count': 0,
 'time_zone': 'Kyiv',
 'translator_type': 'none',
 'url': None,
 'utc_offset': 10800,
 'verified': False}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="CATALAN-COMARQUES">CATALAN COMARQUES<a class="anchor-link" href="#CATALAN-COMARQUES">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [25]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://en.wikipedia.org/wiki/Municipalities_of_Catalonia"</span>
<span class="n">tabs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">tabs</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">tabs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">tabs</span> <span class="o">=</span> <span class="n">tabs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [80]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tabs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[80]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>Index(['Municipality', 'Comarca', 'Province', 'Population (2014)[3]',
       'Area (km2)[3]', 'Density', 'No. of EMDs[4]'],
      dtype='object', name=0)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tabs</span><span class="p">[</span><span class="n">tabs</span><span class="p">[</span><span class="s1">'Comarca'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Osona'</span><span class="p">][</span><span class="s1">'Municipality'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[35]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array(['Alpens', 'Balenyà', 'El Brull', 'Calldetenes', 'Centelles',
       'Espinelves', "L'Esquirol", 'Folgueroles', 'Gurb', 'Lluçà', 'Malla',
       'Manlleu', 'Les Masies de Roda', 'Les Masies de Voltregà',
       'Montesquiu', 'Muntanyola', 'Olost', 'Orís', 'Oristà', 'Perafita',
       'Prats de Lluçanès', 'Roda de Ter', 'Rupit i Pruit',
       'Sant Agustí de Lluçanès', 'Sant Bartomeu del Grau',
       'Sant Boi de Lluçanès', 'Sant Hipòlit de Voltregà',
       'Sant Julià de Vilatorta', "Sant Martí d'Albars",
       'Sant Martí de Centelles', 'Sant Pere de Torelló',
       'Sant Quirze de Besora', "Sant Sadurní d'Osormort",
       'Sant Vicenç de Torelló', 'Santa Cecília de Voltregà',
       'Santa Eugènia de Berga', 'Santa Eulàlia de Riuprimer',
       'Santa Maria de Besora', 'Seva', 'Sobremunt', 'Sora', 'Taradell',
       'Tavèrnoles', 'Tavertet', 'Tona', 'Torelló', 'Vic', 'Vidrà',
       'Viladrau', 'Vilanova de Sau'], dtype=object)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [82]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tabs_sorted_com</span> <span class="o">=</span> <span class="n">tabs</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">'Comarca'</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">'Comarca'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [85]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tabs_sorted_com</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s1">'Osona'</span><span class="p">][</span><span class="s1">'Municipality'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[85]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array(['Muntanyola', 'Santa Eugènia de Berga', "Sant Sadurní d'Osormort",
       'Vidrà', 'Tona', 'Torelló', 'Rupit i Pruit', 'Roda de Ter',
       'Santa Cecília de Voltregà', 'Sant Vicenç de Torelló',
       'Santa Eulàlia de Riuprimer', 'Calldetenes', 'Prats de Lluçanès',
       'Tavertet', 'Montesquiu', 'Sant Julià de Vilatorta', 'Orís', 'Vic',
       'Olost', 'Sant Boi de Lluçanès', 'Perafita', "L'Esquirol",
       'Viladrau', 'Taradell', 'Les Masies de Roda', 'Sora',
       'Les Masies de Voltregà', 'Gurb', 'Seva', 'Sobremunt',
       'Folgueroles', 'Santa Maria de Besora', 'Oristà', 'Vilanova de Sau',
       'El Brull', 'Espinelves', "Sant Martí d'Albars",
       'Sant Bartomeu del Grau', 'Tavèrnoles', 'Manlleu', 'Malla',
       'Sant Pere de Torelló', 'Sant Quirze de Besora',
       'Sant Agustí de Lluçanès', 'Alpens', 'Sant Martí de Centelles',
       'Sant Hipòlit de Voltregà', 'Centelles', 'Balenyà', 'Lluçà'], dtype=object)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>
</div>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://pgervila.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>